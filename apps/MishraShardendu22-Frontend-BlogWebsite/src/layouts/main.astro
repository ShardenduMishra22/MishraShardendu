---
import '../styles/global.css';

interface Props {
  title?: string;
  description?: string;
  image?: string;
  url?: string;
  type?: 'website' | 'article';
  publishedTime?: string;
  modifiedTime?: string;
  author?: string;
  tags?: string[];
}

const { 
  title = 'Tech Blog | Shardendu Mishra - Software Engineering Insights',
  description = 'Explore in-depth articles about software engineering, Go programming, React development, TypeScript, Next.js, cloud-native solutions, system design, and modern web technologies by Shardendu Mishra.',
  image = 'https://mishrashardendu22.is-a.dev/Professional.webp',
  url = 'https://mishrashardendu22.is-a.dev/blog',
  type = 'website',
  publishedTime,
  modifiedTime,
  author = 'Shardendu Mishra',
  tags = []
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, 'https://mishrashardendu22.is-a.dev');
const fullImageUrl = image.startsWith('http') ? image : `https://mishrashardendu22.is-a.dev${image}`;
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		
		<!-- Favicons -->
		<link rel="icon" type="image/x-icon" href="/favicon.ico" />
		<link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-192.png" />
		<link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192.png" />
		<link rel="icon" type="image/png" sizes="512x512" href="/icons/icon-512.png" />
		
		<!-- Primary Meta Tags -->
		<title>{title}</title>
		<meta name="title" content={title} />
		<meta name="description" content={description} />
		<meta name="keywords" content={`Shardendu Mishra, Software Engineering Blog, Go Programming, Golang, React, TypeScript, Next.js, JavaScript, Cloud Native, Technology Blog, Developer Blog, Web Development, System Design, Backend Development, Frontend Development, Full Stack, Programming Tutorials, Code Examples, Best Practices, Software Architecture, Microservices, DevOps, Docker, Kubernetes, ${tags.join(', ')}`} />
		<meta name="author" content={author} />
		<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
		<meta name="googlebot" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
		<meta name="language" content="English" />
		<meta name="revisit-after" content="7 days" />
		<meta name="category" content="Technology" />
		<meta name="classification" content="Blog" />
		
		<!-- Open Graph / Facebook -->
		<meta property="og:type" content={type} />
		<meta property="og:url" content={url} />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content={fullImageUrl} />
		<meta property="og:image:secure_url" content={fullImageUrl} />
		<meta property="og:image:width" content="1200" />
		<meta property="og:image:height" content="630" />
		<meta property="og:image:alt" content={`${title} - Blog by Shardendu Mishra`} />
		<meta property="og:site_name" content="Shardendu Mishra Tech Blog" />
		<meta property="og:locale" content="en_US" />
		{type === 'article' && publishedTime && <meta property="article:published_time" content={publishedTime} />}
		{type === 'article' && modifiedTime && <meta property="article:modified_time" content={modifiedTime} />}
		{type === 'article' && <meta property="article:author" content={author} />}
		{type === 'article' && tags.length > 0 && tags.map(tag => <meta property="article:tag" content={tag} />)}
		
		<!-- Twitter -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:url" content={url} />
		<meta name="twitter:site" content="@Shardendu_M" />
		<meta name="twitter:creator" content="@Shardendu_M" />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		<meta name="twitter:image" content={fullImageUrl} />
		<meta name="twitter:image:alt" content={`${title} - Blog by Shardendu Mishra`} />
		
		<!-- PWA Meta Tags -->
		<meta name="theme-color" content="#10b981" media="(prefers-color-scheme: dark)" />
		<meta name="theme-color" content="#00c896" media="(prefers-color-scheme: light)" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<meta name="apple-mobile-web-app-title" content="Shardendu Blog" />
		<meta name="mobile-web-app-capable" content="yes" />
		<meta name="application-name" content="Shardendu Mishra Blog" />
		
		<!-- Additional SEO -->
		<meta name="format-detection" content="telephone=no" />
		<meta name="msapplication-TileColor" content="#10b981" />
		<meta name="msapplication-tap-highlight" content="no" />
		
		<!-- Canonical URL -->
		<link rel="canonical" href={canonicalURL} />
		
		<!-- Manifest -->
		<link rel="manifest" href="/manifest.json" />
		
		<!-- Alternate Languages -->
		<link rel="alternate" hreflang="en" href={canonicalURL} />
		<link rel="alternate" hreflang="x-default" href={canonicalURL} />
		
		<script is:inline>
			// Prevent FOUC by setting theme before page renders
			(function() {
				const theme = localStorage.getItem('theme') || 
					(window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
				document.documentElement.classList.toggle('dark', theme === 'dark');
			})();
		</script>
	</head>
	<body>
		<slot />
	</body>
</html>
